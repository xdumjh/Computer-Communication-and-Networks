## 连接局域网、主干网与虚拟局域网

### 连接局域网、主干网

#### 五类连接设备



![image-20221010103620155](C:\Users\mjh\AppData\Roaming\Typora\typora-user-images\image-20221010103620155.png)

##### 无源集线器

1.仅仅是一个连接器，连接来自不同分支的线路。

2.星型拓扑中，是一个来自不同站点的冲突点。

3.工作在物理层以下。

##### 中继器：拓展局域网的物理长度

1.仅工作在物理层。

2.只能连接采用相同协议的局域网，连接的是一个局域网中的两个分段。

3.转发每一帧，没有过滤能力。**不进行检查**

4.中继器是再生器而不是放大器。**仅仅恢复信号，而不放大信号**

5.采用星型拓扑，可以多级级联。



![image-20221010104210350](C:\Users\mjh\AppData\Roaming\Typora\typora-user-images\image-20221010104210350.png)



##### 有源集线器

1.工作在物理层，不能识别帧前同步码、帧定界符与网络层首部。

2.集线器组建的以太网计算机共享带宽，计算机越多单个带宽约低。

3.无论数据帧的MAC地址是否属于自己，集线器均能捕获，因此天然存在隐患。

4.可以多级级联。

![image-20221010104606559](C:\Users\mjh\AppData\Roaming\Typora\typora-user-images\image-20221010104606559.png)

##### 有源集线器级联优缺点

###### 优点：

1.有源集线器是多端口中继器。

2.用于星型拓扑，克服了10Base-T标准100m的距离限制，拓展范围增加计算机数量。

###### 缺点：

1.计算机处于一个冲突域中，增大了冲突概率，每台计算机的带宽降低。

2.接口带宽要一致，如果速率不一致要工作在较低速率。

##### 单播、广播、广播域与冲突域。

###### 单播：p2p的方式，一个发送者和一个接收者之间的通信。

###### 广播：主机间==一对所有==的的通信方式，广播只在==二层交换机==的局域网范围内，禁止广播数据穿过路由器。

###### 广播域：能够接受广播帧的所有设备集合称为广播域。

###### 冲突域：同一个网络上两个比特同时进行传输会产生冲突，这样的区域称为冲突域。所有共享介质环境都是冲突域![QQ截图20221010105636](C:\Users\mjh\Desktop\QQ截图20221010105636.png)



为信息共享 可以进行级联

![QQ截图20221010105738](C:\Users\mjh\Desktop\QQ截图20221010105738.png)

**效率降低 平均带宽降低。**



###### 多个集线器连接：

![image-20221010105914088](C:\Users\mjh\AppData\Roaming\Typora\typora-user-images\image-20221010105914088.png)

A向B发送帧时同时会发送到集线器一二 所有计算器共享整个介质。

A向B发送时 别的计算机之间不能通信。==类似于抢占式资源？==

##### 网桥

1.网桥工作在物理层与数据链路层

2.作为物理层设备时，重新生成收到的信号。

3.作为数据链路层设备时，可以检查帧的MAC地址。**数据链路层的检错纠错功能**

4.有一个过滤决策表，来决定是否进行转发某个帧。

![image-20221010110244270](C:\Users\mjh\AppData\Roaming\Typora\typora-user-images\image-20221010110244270.png)



###### 网桥组网的特点

1.**一个接口是一个冲突域**，冲突概率降低。

2.基于MAC地址转发帧，工作在数据链路层。

3.实现帧的存储与转发，增加了时延。（根据MAC地址决定是否转发的判断时间）

4.不同接口可以时不同带宽。（有存储功能）

###### 学习型网桥与学习过程

**在不确定对方地址时，使用广播。**

先进行广播，网桥记录不同端口的不同地址。

***表中无数据就进行广播，有数据根据数据向不同端口传输。发送方发送数据时在网桥中记录端口与地址***

![image-20221010111246579](C:\Users\mjh\AppData\Roaming\Typora\typora-user-images\image-20221010111246579.png)

###### 环路问题

![image-20221010111727058](C:\Users\mjh\AppData\Roaming\Typora\typora-user-images\image-20221010111727058.png)

出现环路时会导致网桥无法存储端口地址：**进行广播时会导致不同网桥会收到重复信息导致端口号不一致**

因此要避免环路。



###### 生成树（避免环路）

1.生成树是没有循环路径的图。

2.基于某种度量（最小跳数，最小延迟，最短队列，最大带宽）选择最小代价。

3.假设网桥到LAN的跳数是1，LAN到网桥的跳数是0。

![image-20221010112540087](C:\Users\mjh\AppData\Roaming\Typora\typora-user-images\image-20221010112540087.png)

###### 生成树算法

选择ID最小的网桥作为根网桥。

找出从根路径到其他网桥或LAN的最短路径。

最短路径合成最短生成树。

标记转发端口和阻塞端口。（不使用的端口设置为阻塞端口）

![image-20221010112658248](C:\Users\mjh\AppData\Roaming\Typora\typora-user-images\image-20221010112658248.png)



###### 源路由网桥

1.由源站点来指定需要经过的端口的网桥。*常用于令牌环网*

###### 使用网桥连接不同局域网：

1.帧格式

2.最大数据长度

3.数据速率

4.位顺序（高位优先还是低位优先）

5.安全

6.多媒体支持

###### 网桥连接不同的局域网

![QQ截图20221010113455](C:\Users\mjh\Desktop\QQ截图20221010113455.png)

 网桥将所有的端口分隔成不同的冲突与但***网桥的所有端口处于一个广播域中*** 

##### 二层交换机--多端口的网桥

1.端口独享带宽    集线器是共享带宽

2.安全：交换机根据MAC地址只转发到目标端口。

3.全双工通信

4.全双工不再使用CSMA/CD协议

5.接口可以工作在不同速率 ：交换机的存储转发技术。

6.转发广播帧：转发到除了发送端口以外的所有端口。

![image-20221010114023999](C:\Users\mjh\AppData\Roaming\Typora\typora-user-images\image-20221010114023999.png)

###### 优点：

1.从总线型局域网或集线器型局域网转变为交换局域网。

2.只要不超过二层交换机的容量，每个设备都有相当于原来整个局域网容量的专用容量。

3.易于扩容

###### 类型：

1.转发存储式

(1) 从输入线路上接收帧

(2) 缓存

(3) 通过路由选择将其发送到适当的输出线路上

(4)发送方与接收方存在延迟

(5)增进了网络整体的一致性。

2.直通式

(1) 利用目的地址总是在MAC帧的最前面的特点

(2)交换机识别出目的地址后就将帧转发到适当的输出线路==***没有进行检错*** 导致可能传播损坏桢==

(3)能够达到很大的吞吐量

